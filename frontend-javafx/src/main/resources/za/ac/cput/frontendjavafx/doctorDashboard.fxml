<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane stylesheets="@doctor-dashboard.css" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="za.ac.cput.frontendjavafx.controllers.DoctorDashboardController">

   <!-- ===== Header ===== -->
   <top>
      <BorderPane prefHeight="72" style="-fx-background-color: white; -fx-border-color: #e6eaf2; -fx-border-width: 0 0 1 0">

         <!-- left: logo + app name -->
         <left>
            <HBox alignment="CENTER_LEFT" spacing="12">
               <padding><Insets bottom="10" left="10" right="10" top="10" /></padding>

               <Label style="-fx-font-size:16; -fx-font-weight:bold; -fx-text-fill:#028090" text="HealthConnect" />
            </HBox>
         </left>

         <!-- right: user info + refresh -->
         <right>
            <HBox alignment="CENTER_RIGHT" spacing="12">
               <padding><Insets bottom="10" left="10" right="10" top="10" /></padding>

               <VBox alignment="CENTER_RIGHT" spacing="2">
                  <Label fx:id="headerDocName" style="-fx-font-size:14; -fx-font-weight:bold" text="Dr. Your Name" />
                  <Label fx:id="headerEmail" style="-fx-text-fill:#6c7a89" text="you@example.com" />
               </VBox>

               <Button fx:id="refreshBtn" onAction="#onClickRefresh" text="Refresh" />
            </HBox>
         </right>
      </BorderPane>
   </top>

   <!-- ===== Sidebar ===== -->
   <left>
      <VBox styleClass="sidebar">
         <padding><Insets bottom="18" left="18" right="18" top="18" /></padding>

         <!-- profile card -->
         <VBox alignment="CENTER" spacing="10" styleClass="card profile-card">
<!--            <ImageView fitHeight="88" fitWidth="88" preserveRatio="true" styleClass="avatar-lg">-->
<!--               <image>-->
<!--                  <Image url="@/za/ac/cput/frontendjavafx/images/avatar-doctor.png"/>-->
<!--               </image>-->
<!--            </ImageView>-->
            <Label fx:id="sideName" styleClass="title-md" text="Dr. Your Name" />
            <Label fx:id="sideSpec" styleClass="muted" text="Speciality" />
         </VBox>

         <Separator />

         <!-- nav (static for now) -->
         <VBox spacing="8">
            <Button styleClass="nav-btn,active" text="Dashboard" />
            <Button onAction="#onLogout" styleClass="nav-btn danger" text="Logout" />
         </VBox>
      </VBox>
   </left>

   <!-- ===== Main content ===== -->
   <center>
      <GridPane hgap="16" styleClass="main" vgap="16">
         <padding><Insets bottom="16" left="16" right="16" top="16" /></padding>

         <!-- Today's Schedule -->
         <VBox spacing="12" styleClass="card" GridPane.columnIndex="0" GridPane.rowIndex="0">
            <Label styleClass="card-title" text="Today's Schedule" />
            <ListView fx:id="todayList" VBox.vgrow="ALWAYS" />
         </VBox>

         <!-- Latest Appointments -->
         <VBox spacing="12" styleClass="card" GridPane.columnIndex="1" GridPane.rowIndex="0">
            <Label styleClass="card-title" text="Latest Appointments" />
            <ListView fx:id="latestList" VBox.vgrow="ALWAYS" />
         </VBox>

         <!-- KPI column -->
         <VBox spacing="12" GridPane.columnIndex="2" GridPane.rowIndex="0">

            <HBox styleClass="kpi-card">
               <Label styleClass="kpi-icon" text="ðŸ—“" />
               <VBox>
                  <Label fx:id="kpiTotal" styleClass="kpi-number" text="0" />
                  <Label styleClass="kpi-label" text="Total Appointments" />
               </VBox>
            </HBox>

            <HBox styleClass="kpi-card">
               <Label styleClass="kpi-icon" text="âœ…" />
               <VBox>
                  <Label fx:id="kpiCompleted" styleClass="kpi-number" text="0" />
                  <Label styleClass="kpi-label" text="Completed" />
               </VBox>
            </HBox>

            <HBox styleClass="kpi-card">
               <Label styleClass="kpi-icon" text="âŒ" />
               <VBox>
                  <Label fx:id="kpiCancelled" styleClass="kpi-number" text="0" />
                  <Label styleClass="kpi-label" text="Cancelled" />
               </VBox>
            </HBox>

            <HBox styleClass="kpi-card">
               <Label styleClass="kpi-icon" text="ðŸ”" />
               <VBox>
                  <Label fx:id="kpiFollowup" styleClass="kpi-number" text="0" />
                  <Label styleClass="kpi-label" text="Follow-up" />
               </VBox>
            </HBox>
         </VBox>

         <!-- quick links row -->
         <HBox spacing="16" GridPane.columnSpan="3" GridPane.rowIndex="1" />
         <columnConstraints>
            <ColumnConstraints />
            <ColumnConstraints />
            <ColumnConstraints />
         </columnConstraints>
         <rowConstraints>
            <RowConstraints />
            <RowConstraints />
         </rowConstraints>
      </GridPane>
   </center>

   <!-- optional footer status line -->
   <bottom>
      <Label fx:id="statusLabel" style="-fx-padding: 6 12 6 12; -fx-text-fill: #6c7a89;" text="" />
   </bottom>
</BorderPane>
